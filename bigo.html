<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>شحن بيجو لايف</title>
  <style>
    body { background:#111; color:#FFD700; font-family:sans-serif; text-align:center; padding:30px }
    input, select { padding:10px; width:230px; margin:10px; border-radius:6px; border:1px solid #FFD700; font-size:16px }
    .btn { padding:10px 20px; border-radius:6px; font-weight:bold; margin:10px; text-decoration:none }
    .main { background:#FFD700; color:#000 }
    .whats { background:#25D366; color:#fff }
    .box { margin:20px auto; max-width:400px }
    .result { color:#fff; font-size:18px; margin-top:15px }
  </style>
</head>
<body>

  <h2>شحن بيجو لايف</h2>
  <div class="box">
    <input id="units" type="number" placeholder="ادخل الكمية" oninput="checkProgress()">
    
    <div id="countryDiv" style="display:none">
      <select id="country" onchange="loadMethods()">
        <option value="">اختر الدولة</option>
        <option value="مصر">🇪🇬 مصر</option>
        <option value="السعودية">🇸🇦 السعودية</option>
        <option value="الإمارات">🇦🇪 الإمارات</option>
      </select>
    </div>

    <div id="methodDiv" style="display:none">
      <select id="method" onchange="calcPrice()"></select>
    </div>

    <div id="result" class="result" style="display:none">
      <p id="priceText"></p>
    </div>

    <a href="index.html" class="btn main">العودة للرئيسية</a>
    <a id="wa" class="btn whats" target="_blank" style="display:none;">طلب عبر واتساب</a>
  </div>

  <script>
    const methods = {
      "مصر": ["فودافون كاش", "انستا باي", "ويسترن يونيون"],
      "السعودية": ["تحويل بنكي داخلي"],
      "الإمارات": ["تحويل بنكي داخلي"]
    };

    function checkProgress() {
      const val = +document.getElementById("units").value;
      document.getElementById("countryDiv").style.display = val > 0 ? "block" : "none";
      document.getElementById("methodDiv").style.display = "none";
      document.getElementById("result").style.display = "none";
      document.getElementById("wa").style.display = "none";
    }

    function loadMethods() {
      const country = document.getElementById("country").value;
      const methodSelect = document.getElementById("method");
      methodSelect.innerHTML = "";
      if (country && methods[country]) {
        methods[country].forEach(m => {
          let opt = document.createElement("option");
          opt.value = m; opt.text = m;
          methodSelect.add(opt);
        });
        document.getElementById("methodDiv").style.display = "block";
        calcPrice();
      } else {
        document.getElementById("methodDiv").style.display = "none";
      }
    }

    function calcPrice() {
      const units = +document.getElementById("units").value;
      const country = document.getElementById("country").value;
      const method = document.getElementById("method").value;

      if (!units || !country || !method) return;

      let price = 0, currency = "";
      if (country === "مصر") { price = (units * 0.94).toFixed(2); currency = "جنيه"; }
      else if (country === "السعودية") { price = (units * 0.073).toFixed(2); currency = "ريال"; }
      else if (country === "الإمارات") { price = (units * 0.069).toFixed(2); currency = "درهم"; }

      document.getElementById("priceText").innerText =
        `سعر ${units} وحدة = ${price} ${currency}\nطريقة الدفع: ${method}`;

      const msg = `طلب شحن بيجو لايف:\nالكمية: ${units}\nالدولة: ${country}\nالدفع: ${method}\nالسعر: ${price} ${currency}`;
      document.getElementById("wa").href = `https://wa.me/201145427899?text=${encodeURIComponent(msg)}`;
      document.getElementById("result").style.display = "block";
      document.getElementById("wa").style.display = "inline-block";
    }
  </script>

</body>
</html>
